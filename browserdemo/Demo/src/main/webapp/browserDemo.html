<!DOCTYPE html>
<html>

<script>

if (typeof (EventSource) !== "undefined") {
	var source = new EventSource("http://localhost:8080/Demo/DemoServlet");
	source.onmessage = function(event) {
		document.getElementById("Latest").innerHTML = event.data
			+ "<br><br>";
		var data = event.data; 
		switch(data) {
			case "left":
				myLeft();
				break;
			case "right":
				myRight();
				break;
			default:
				break;
		}
	};
} else {
	document.getElementById("Latest").innerHTML = "Sorry, your browser does not support server-sent events...";
}

var picture = 1;

function myLeft() {
	picture = picture - 1;
	showPicture();
}

function myRight() {
	picture = picture + 1;
	showPicture();
}

function showPicture() {
	if (picture <= 0) {
		picture = 4;
	}
	if (picture > 4) {
		picture = 1;
	}

	switch(picture) {
		case 1:
			document.getElementById("pic").innerHTML = "<img src='images/1.jpg'>";
			break;
		case 2:
			document.getElementById("pic").innerHTML = "<img src='images/2.jpg'>";
			break;
		case 3:
			document.getElementById("pic").innerHTML = "<img src='images/3.jpg'>";
			break;
		case 4:
			document.getElementById("pic").innerHTML = "<img src='images/4.jpg'>";
			break;
		default:
			document.getElementById("pic").innerHTML = "<img src='images/1.jpg'>";
	} 
}	


</script>


<p>Latest SSE data: </p>
<p id="Latest"></p>


<body onload="showPicture()">

<h1>Browser Demo</h1>

<p>Click Left or Right to change the picture (number).</p>

<p id="pic"></p>

<br>

<button type="button" onclick="myLeft()">Left</button>
<button type="button" onclick="myRight()">Right</button>

<p id="left"></p>
<p id="right"></p>

<div id="ServerTime"></div>

</body>
</html> 
