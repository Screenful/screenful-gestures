<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

  <title>WebSocket test</title>
</head>
  <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  
  <script src="bootstrap/js/bootstrap.js"></script>
  
<body>
  <script>
  
  var socket;
  var registered = false;
  
  function startClient() {
    console.log("opening socket");
    //on http server use document.domain instead od "localhost"
    //Start the websocket client
    socket = new WebSocket("ws://localhost:8887/");
    
    //When the connection is opened, login.
    socket.onopen = function() {
      console.log("Opened socket.");
      //register the user
      //var nickname = "jee";
      //socket.send(nickname);
    };
    
    //When received a message, parse it and either add/remove user or post message.
    socket.onmessage = function(a) {
      //process the message here
      console.log("received message: " + a.data);
      var message = JSON.parse(a.data);
      
    }
    socket.onclose = function() { document.write("Closed socket."); };
    socket.onerror = function() { document.write("Error during transfer."); };
    
  }
  
  function sendMessage() {
  }
  
  
  $(document).ready(function() {
        startClient();
    
  });
  
  
  
  </script>
  
</body>
</html>
